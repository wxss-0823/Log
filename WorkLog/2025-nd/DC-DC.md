# Convert DC to DC

## 1. 基础理论

### 1.1. 均值 KCL

​	由基尔霍夫电流定律，取均值，并交换求和与均值计算，得：
$$
\sum<i_N> =0
$$
​	其中，$<i_N>$ 表示均值电流。

### 1.2. 均值 KVL

​	由基尔霍夫电压定律，取均值，并交换求和与均值计算，得：
$$
\sum<v_N> =0
$$
​	其中，$<v_N>$ 表示均值电压。

### 1.3. 容感器均值参数

​	在周期性稳态电路中，根据电荷守恒，流入电容器的平均电流为 0，类似地，电感器两端的电压为 0 。

## 3. DC-DC

### 3.1. Buck

​	以一个单刀双掷开关和若干电容、电感构成如下电路，并假设电容、电感无限大，以至于电压、电流的纹波为 0 ，电源转换效率为 1，即无耗。

​	当开关状态为 1 时，即开关向上闭合，$v_x=v_1$ ；当开关状态为 0 时，即开关向下闭合，$v_x = 0$ 。对电路做均值 KVL 分析，周期稳定状态下，电感器的均值电压为 0 ，可得：
$$
<v_2> = <v_x> \\
So,\ V_2 =DV_1
$$
​	类似地，对电流做分析也可以得到 $I_1 = DI_2$ ，其中 D 为开关占空比。通过控制占空比和频率以及电感间的关系，可以调整输出电压的幅度。输出电压恒小于输入电压，此为降压电路。

​	将上图中的单刀双掷开关，向上闭合的位置用 MOSFET 代替，向下闭合的位置用二极管代替，即为 BUCK 电路。其中，MOSFET 和二极管需要承载大电压 $V_1$ ，大电流 $I_2$ 。

![DC-DC Buck Circuit](./Assets/DC-DC_BuckCircuit.png)

### 3.2. Boost

​	现在对上图做出一些调整，假设单刀双掷开关向下闭合的状态为 1 ，向上闭合的状态为 0 ，调换上图中直流源与负载的位置，对包含 $v_x$ 的回路做 KVL 分析，周期稳定状态下，电感器的均值电压为 0 ，可得：
$$
<v_1> = <v_x> \\
So,\ V_1 = (1-D)V_2
$$
​	类似地，对电流做分析也可以得到 $I_2 = (1-D)I_1$ ，其中 D 为开关占空比。此时，开关状态为 1 时，电源向电感器充电；开关状态为 0 时，电源和电感器同时向负载放电，以提供高于电源的负载电压。输出电压恒大于输入电压，此为升压电路。

​	将上述电路中单刀双掷开关向下闭合的位置用 MOSFET 代替，向上闭合的位置用二极管代替，即为 BOOST 电路。其中，MOSFET 和二极管需要承载大电压 $V_2$ ，大电流 $I_1$ 。

![DC-DC Boost Circuit](./Assets/DC-DC_BoostCircuit.png)

### 3.3. Buck-Boost

​	Buck 与 Boost 电路中，包含一种相同的三端子网络，使用这个三端子网络的另一种输入方式，可以获得同时升高或降低电压的功能，如下图。

​	当单刀双掷开关向左闭合，状态为 1 ，向右闭合，状态为 0 。当开关状态为 1 时，$v_L = v_1$ ；当开关状态为 0 时，$v_L=v_2$ 。在周期稳定状态下，为保证电感器均值电压为 0 ，$v_2$ 必须为负值。$v_L$ 的均值可表示为：
$$
<v_L> = DV_1 + (1-D)V_2 \\
So,\ V_2 = -\frac{D}{1-D}V_1
$$
​	在实现时，将开关向左闭合的状态替换为 MOSFET，向右闭合的状态替换为二极管。假设，流过 MOSFET 的均值电流为 $I_1$ ，流过二极管的均值电流为 $I_2$ ，电容需要承载某一路的瞬时电流，随开关状态切换，当开关状态为 1 时，电容承载来自负载的负电流，状态为 0 时，承载来自源的正电流。根据均值 KCL 分析，周期稳定状态下，电容的均值电流为 0 ，即：
$$
<i_c> = DI_1-(1-D)I_2 \\
So,\ I_1 = \frac{1-D}{D}I_2
$$
​	上述结构中，电感需要承载全部的均值电流，即 $I_L = |I_1|+|I_2|$ ；电容需要承载全部的均值电压，即 $V_L = |V_1|+|V_2|$ 。类似地，也可以分析，MOSFET 需要承载全部的电压和全部的电流，二极管也是如此。

![DC-DC Buck Boost Circuit](./Assets/DC-DC_Buck-BoostCircuit.png)

### 3.3. 小结

​	这种电路优势在于效率高，输入功率几乎全部转化为输出功率，输出电压可调范围大，驱动能力强。缺点在于，负载响应较差，当负载电流变化时，输出电压也会随之变化，由于依赖电感、电容器件，输出电压的纹波较大。

### 3.4. 纹波

​	以 Boost 电路为例，流过二极管的电流 $i_D$ 是一个周期为 T ，占空比为 $(1-D)$ 方波，其等效直流为 $(1-D)I_L$  。为了关注纹波特性，聚焦于右侧部分电路如下。

![DC-DC Ripple Circuit](./Assets/DC-DC_RippleCircuit.png)

​	其中，RC 电路的时间常数为 RC，如果开关频率远大于 RC 低通电路截至频率，即 $1/T >> 1/RC$ ，此时可以认为输出电压为理想直流。

​	事实上，实际的输出电压除去等效直流作用于负载电阻的部分，还有一部分交流电流分量作用于电容产生的纹波电压。当交流分量小于 0 时，电容电压线性降低；当交流分量大于 0 时，电容电压线性增加。这就是输出纹波产生的原因。设纹波电压的峰峰值为 $\Delta V_{c, pp}$ ，则有：
$$
\Delta V_{c,pp} &=& 1/C \cdot \int_{DT}^{T} i_{C}\ dt \\
&=&1/C \cdot DI_L(1-D)T \\
C &\ge& \frac{DI_L(1-D)T}{\Delta V_{c,pp}}
$$
​	通过上式，可以设定能够满足纹波条件的电容值。





LDO



















